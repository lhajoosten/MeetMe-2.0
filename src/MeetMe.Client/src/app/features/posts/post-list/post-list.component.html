<div class="posts-container">
  <app-create-post
    [meetingId]="meetingId"
    (postCreated)="onPostCreated($event)">
  </app-create-post>

  <div class="loading" *ngIf="isLoading">
    <p>Loading posts...</p>
  </div>

  <div class="error-message" *ngIf="errorMessage">
    <p>{{ errorMessage }}</p>
  </div>

  <div class="posts-list" *ngIf="!isLoading && !errorMessage">
    <div class="no-posts" *ngIf="posts.length === 0">
      <p>No posts yet. Be the first to share your thoughts!</p>
    </div>

    <div
      *ngFor="let post of posts; trackBy: trackByPostId"
      class="post-card"
    >
      <div class="post-header">
        <div class="author-info">
          <h4>{{ post.author.firstName }} {{ post.author.lastName }}</h4>
          <span class="post-date">{{ post.createdAt | date:'medium' }}</span>
        </div>
        <div class="post-actions">
          <button
            class="btn btn-danger btn-small"
            (click)="onPostDeleted(post.id)"
            title="Delete post"
          >
            Delete
          </button>
        </div>
      </div>

      <div class="post-content">
        <p>{{ post.content }}</p>
      </div>

      <div class="post-footer">
        <div class="post-stats">
          <span class="comments-count">
            {{ post.comments.length }} {{ post.comments.length === 1 ? 'comment' : 'comments' }}
          </span>
        </div>
        <div class="post-footer-actions">
          <a
            [routerLink]="['/posts', post.id]"
            class="btn btn-outline btn-small"
          >
            View Details
          </a>
        </div>
      </div>
    </div>
  </div>
</div>
